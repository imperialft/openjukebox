%h1 Songs
%p
  Want your favorite songs here? Just drop your file in
  %i= Song.root
  and just
  %a{:href => '/songs/refresh'} click here!
  == Supported formats are: #{Song.formats.join(', ')}.

:coffeescript
  $(document).ready ->
    $('a.cue').click ->
      a = $(@)
      $.post a.attr('href'), {}, (data, stat, xhr) =>
        $.notification
          title: 'Added! There is ' + data + ' songs in the queue.'
          timeout: 5000
          showTime: false
          icon: 'N'

      false # return

- @songs.inject({}){|p,i|a = i.artist.split(',').first.strip; p.has_key?(a) ? p[a].push(i) : p[a] = [i]; p}.sort{|(a,_),(b,_)| a <=> b }.each do |artist, songs|
  %p
    %table.table.table-striped.table-bordered
      %thead
        %tr
          %th{:colspan => 2}= artist
      %tbody
        %tr
          %td
            - songs.each do |song|
              %a.btn.btn-default.cue{:href => "/songs/#{song.id}/cue"}
                %i.icon-circle-arrow-up
                = song.title
                == @ #{number_to_yen(song.price)}